<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.base.sbc.module.sample.mapper.SampleStyleColorMapper">
    <update id="reviseAllStyleNo">

      update  t_sample_style_group
      set  style_no = #{nweStyleNo}
      where style_no = #{styleNo} ;

      update  t_sample_style_group_color
      set  style_no = #{nweStyleNo}
      where style_no = #{styleNo} ;

      update  t_sample_style_order_book_color
      set  style_no = #{nweStyleNo}
      where style_no = #{styleNo} ;

      update  t_pack_info
      set  style_no = #{nweStyleNo}
      where style_no = #{styleNo} ;

    </update>
    <!--
        样衣-款式配色
        创建人：mengfanjiang
        邮箱：XX.com
        创建时间：2023-6-28 15:02:46
        版本号：1.0
      -->

    <!-- ***********************自定义方法区 不替换的区域【other_start】***************************************** -->


    <!-- ***********************自定义方法区 不替换的区域【other_end】******************************************** -->
    <select id="isStyleNoExist" resultType="java.lang.Integer">
        select count(1) from t_sample_style_color where  style_no=#{styleNo}
    </select>

    <select id="getStyleColorNumber" resultType="java.lang.Integer">
         select count(1) from t_sample_style_color where  sample_design_id=#{styleNo}
    </select>
    <select id="getSampleStyleColorList" resultType="com.base.sbc.module.sample.vo.SampleStyleColorVo">
    SELECT
    sd.style_flavour_name,
    sd.category_name,
	sob.meet_flag,
	cl.color16,
    ssc.*
    FROM t_sample_style_color ssc
    LEFT JOIN t_sample_design sd on ssc.sample_design_id  = sd.id
	LEFT JOIN t_sample_style_order_book_color sobc on ssc.style_no = sobc.style_no
    LEFT JOIN t_sample_style_order_book sob on sob.order_book_code =sobc.order_book_code
    LEFT JOIN t_basicsdatum_colour_library cl on ssc.colour_library_id = cl.id
    ${ew.customSqlSegment}
    </select>

</mapper>